import{a as ce}from"./chunk-SNOZO7CT.js";import{a as le,b as pe,e as de}from"./chunk-6ESABJKF.js";import{a as me}from"./chunk-DFESLSPA.js";import{A as Q,B as E,C as T,Ca as ne,D as r,Da as oe,E as s,Ea as S,F as C,G as R,H as m,Ha as re,I as w,J as G,K as N,L as U,M as u,Na as se,Oa as ae,P as v,R as y,S as I,T as q,U as M,a as z,aa as W,ba as Y,c as D,e as b,g as j,h as g,i as B,j as P,k as f,n as _,na as J,o as H,oa as K,pa as X,q as F,qa as Z,r as V,s as A,sa as ee,u as c,ua as ie,v as l,va as te,w as O,x as p,z as k}from"./chunk-QFSULYQ5.js";import"./chunk-E4KJ5XS4.js";import"./chunk-HJR7UGEM.js";import"./chunk-CBRX6AIW.js";import"./chunk-JFVLIC7D.js";import"./chunk-2C7P5QT5.js";import"./chunk-MTGMLXCD.js";import"./chunk-4U6PRYVA.js";import"./chunk-HJX2WMCX.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g as h}from"./chunk-PXG3O44D.js";var he=(()=>{let e=class e{constructor(t){this.element=t}ngAfterViewInit(){Object.assign(this.element.nativeElement,this.config)}};e.\u0275fac=function(n){return new(n||e)(l(A))},e.\u0275dir=H({type:e,selectors:[["","appSwiperConfig",""]],inputs:{config:"config"},standalone:!0});let i=e;return i})();var $=(()=>{let e=class e{constructor(t){this.modalCtrl=t,le({closeCircleOutline:pe})}static show(t,n){return h(this,null,function*(){let o=yield t.create({cssClass:"short-info-modal auto-height",component:e,componentProps:{data:n},showBackdrop:!0,backdropDismiss:!0});return yield o.present(),(yield o.onDidDismiss()).data})}close(){this.modalCtrl.dismiss()}onOk(){this.modalCtrl.dismiss("ok")}};e.\u0275fac=function(n){return new(n||e)(l(S))},e.\u0275cmp=_({type:e,selectors:[["app-short-info-modal"]],standalone:!0,features:[v],decls:14,vars:0,consts:[["size","large","slot","end","name","close-circle-outline",3,"click"],["expand","outline","color","rounded",3,"click"],["expand","outline","shape","rounded","color","primary",3,"click"]],template:function(n,o){n&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),u(3,"Log in to continue"),s(),r(4,"ion-icon",0),m("click",function(){return o.close()}),s()()(),r(5,"ion-card")(6,"ion-card-header")(7,"ion-card-title"),u(8,"To continue you have to log in"),s()(),r(9,"ion-card-content")(10,"ion-button",1),m("click",function(){return o.close()}),u(11,"Cancel"),s(),r(12,"ion-button",2),m("click",function(){return o.onOk()}),u(13,"Ok"),s()()())},dependencies:[re,ee,J,X,Z,K,ne,oe,te,M],styles:["[_nghost-%COMP%]{display:block}ion-toolbar[_ngcontent-%COMP%]{padding-inline:20px;--min-height: 40px}ion-title[_ngcontent-%COMP%]{padding-inline-start:0px;padding-inline-end:0px}ion-card[_ngcontent-%COMP%]{box-shadow:none;margin:0;height:calc(100% - 40px);display:flex;flex-direction:column}ion-card-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-grow:1}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-primary-tint)}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}ion-card-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:20%}@media (max-width: 992px){ion-card-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:40%;height:50px}}"],changeDetection:0});let i=e;return i})();var _e=["swiper"],Ce=(i,e)=>e.id;function we(i,e){if(i&1&&(r(0,"swiper-slide"),C(1,"ion-img",9),s()),i&2){let d=e.$implicit;c(),p("src",d)}}function ve(i,e){if(i&1){let d=R();r(0,"ion-col",10)(1,"app-list-item",11),m("click",function(){let n=F(d).$implicit,o=w(3);return V(o.selectItem(n))}),s()()}if(i&2){let d=e.$implicit;p("sizeMd",4)("sizeLg",3),c(),p("item",d)}}function ye(i,e){if(i&1&&(r(0,"ion-row",2)(1,"ion-col",3)(2,"swiper-container",4,0),E(4,we,2,1,"swiper-slide",null,Q),y(6,"async"),C(7,"div",5),s()()(),r(8,"ion-row",6)(9,"ion-col",7)(10,"ion-row"),E(11,ve,2,3,"ion-col",8,Ce),s()()()),i&2){let d=w(),t=w();c(),p("sizeMd",9)("sizeLg",8),c(),p("config",t.swiperConfig),c(2),T(I(6,5,t.itemImages$)),c(5),p("sizeMd",9)("sizeLg",8),c(2),T(d)}}function Ie(i,e){i&1&&O(0,ye,13,7),i&2&&k(0,e.length?0:-1)}var qe=(()=>{let e=class e{constructor(t,n,o,a){this.itemService=t,this.navService=n,this.authService=o,this.modalCtrl=a,this.destroy$=new z,this.isLogin$=this.authService.user$.pipe(b(x=>!!x)),this.items$=this.itemService.items$,this.itemImages$=this.itemService.items$.pipe(b(x=>x.filter((L,ge)=>ge<3).map(L=>L.url))),this.swiperConfig={modules:[Y],pagination:!0,autoplay:{delay:1e3},speed:500,loop:!0,slidesPerView:1}}ngOnInit(){this.itemService.loadItems(),this.showIfGuest()}ngAfterViewInit(){this.itemService.items$.pipe(f(this.destroy$),B(100)).subscribe(()=>{this.refreshSwiper()})}ionViewWillLeave(){this.destroy$.next(null)}refreshSwiper(){this.swiper&&(this.swiper.nativeElement.swiper.loopDestroy(),this.swiper.nativeElement.swiper.loopCreate(),this.swiper.nativeElement.swiper.activeIndex=0,this.swiper.nativeElement.swiper.update(),this.swiper.nativeElement.swiper.autoplay.start())}selectItem(t){this.isLogin$.pipe(g(1)).subscribe(n=>h(this,null,function*(){n?this.navService.itemDetails(t.id):(yield $.show(this.modalCtrl,{header:"Log in to continue",desc:"To continue you have to log in"}))==="ok"&&this.navService.login()}))}showIfGuest(){this.isLogin$.pipe(f(this.destroy$),g(1),P(t=>t?D:j(3e4).pipe(f(this.destroy$),g(1),P(()=>$.show(this.modalCtrl,{header:"Please log in",desc:"Access more by joining our platform"}))))).subscribe(t=>{t==="ok"&&this.navService.login()})}};e.\u0275fac=function(n){return new(n||e)(l(me),l(ae),l(se),l(S))},e.\u0275cmp=_({type:e,selectors:[["app-home"]],viewQuery:function(n,o){if(n&1&&G(_e,5),n&2){let a;N(a=U())&&(o.swiper=a.first)}},standalone:!0,features:[v],decls:5,vars:8,consts:[["swiper",""],[3,"isLogin","isLoginButton","isSearchButton"],[1,"ion-justify-content-center","swiper-row"],["size","12",3,"sizeMd","sizeLg"],["appSwiperConfig","",3,"config"],[1,"swiper-pagination"],[1,"ion-justify-content-center","ion-padding-vertical","grid-row"],["size","12",1,"ion-no-padding",3,"sizeMd","sizeLg"],["size","6",1,"ion-no-padding"],[3,"src"],["size","6",1,"ion-no-padding",3,"sizeMd","sizeLg"],[3,"click","item"]],template:function(n,o){if(n&1&&(C(0,"app-header",1),y(1,"async"),r(2,"ion-content"),O(3,Ie,1,1),y(4,"async"),s()),n&2){let a;p("isLogin",I(1,4,o.isLogin$))("isLoginButton",!0)("isSearchButton",!0),c(3),k(3,(a=I(4,6,o.items$))?3:-1,a)}},dependencies:[ie,q,M,he,ce,de,W],styles:["ion-toolbar[_ngcontent-%COMP%]{--padding-end: 30px}.swiper-row[_ngcontent-%COMP%]{margin-top:15px;border-bottom:2px solid var(--ion-color-primary-shade)}swiper-container[_ngcontent-%COMP%]{height:44vh;--swiper-theme-color: var(--ion-color-primary)}@media (max-width: 992px){swiper-container[_ngcontent-%COMP%]{height:30vh}}swiper-container[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]{border-radius:var(--border-radius);overflow:hidden;padding-bottom:50px}swiper-container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{object-fit:fill;height:100%;width:100%;border-radius:var(--border-radius);overflow:hidden}"],changeDetection:0});let i=e;return i})();export{qe as HomePage};
